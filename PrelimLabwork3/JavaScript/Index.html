<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prelim Exam Calculator</title>
<style>
body { font-family: 'Segoe UI', sans-serif; background:#f5f5f5; margin:0; padding:0; }
.container { max-width:700px; margin:30px auto; background:#fff; padding:25px 35px; border-radius:15px; box-shadow:0 8px 20px rgba(0,0,0,0.1);}
h1 { text-align:center; color:#007bff; margin-bottom:25px;}
.input-group { margin:15px 0; display:flex; justify-content:space-between; align-items:center; }
.input-group label { font-weight:bold; width:220px; }
.input-group input { width:120px; padding:10px; border:1px solid #ccc; border-radius:10px; font-size:14px; text-align:center; }
button { display:block; width:100%; padding:15px; margin-top:20px; background:linear-gradient(135deg,#007bff,#0056b3); color:white; font-size:16px; border:none; border-radius:12px; cursor:pointer; transition:all 0.3s ease; }
button:hover { background:linear-gradient(135deg,#0056b3,#003f7f); }
.error-message { color:red; font-weight:bold; margin-top:10px; text-align:center; }
.results { margin-top:25px; padding:20px; border-radius:12px; background:#f0f8ff; font-family:Consolas, monospace; white-space:pre-line; box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);}
</style>
</head>
<body>
<div class="container">
<h1>Prelim Exam Calculator</h1>

<!-- Input Fields -->
<div class="input-group"><label>Attendance (0-100):</label><input type="number" id="attendance" min="0" max="100" value="100"></div>
<div class="input-group"><label>Lab Work 1 (0-100):</label><input type="number" id="lab1" min="0" max="100" value="100"></div>
<div class="input-group"><label>Lab Work 2 (0-100):</label><input type="number" id="lab2" min="0" max="100" value="100"></div>
<div class="input-group"><label>Lab Work 3 (0-100):</label><input type="number" id="lab3" min="0" max="100" value="100"></div>

<!-- Inline error message -->
<div id="errorMessage" class="error-message"></div>

<!-- Calculate Button -->
<button onclick="calculatePrelim()">Calculate Prelim Exam Requirements</button>

<!-- Results -->
<div class="results" id="results"></div>
</div>

<script>
// Restrict input to numbers 0-100
document.querySelectorAll('input[type="number"]').forEach(input => {
    input.addEventListener('input', () => {
        let value = input.value.replace(/[^0-9]/g,'');
        if(value!==''){
            if(parseInt(value)>100) value='100';
            if(parseInt(value)<0) value='0';
        }
        input.value = value;
    });
});

function calculatePrelim() {
    const attendance = document.getElementById('attendance').value.trim();
    const lab1 = document.getElementById('lab1').value.trim();
    const lab2 = document.getElementById('lab2').value.trim();
    const lab3 = document.getElementById('lab3').value.trim();
    const results = document.getElementById('results');
    const errorMessage = document.getElementById('errorMessage');

    // --- Clear previous messages ---
    results.innerText = "";
    errorMessage.innerText = "";

    // --- Required fields check ---
    if(!attendance || !lab1 || !lab2 || !lab3){
        errorMessage.innerText = "Please fill in all fields!";
        return;
    }

    const att = parseFloat(attendance);
    const l1 = parseFloat(lab1);
    const l2 = parseFloat(lab2);
    const l3 = parseFloat(lab3);

    // --- Weighted calculations ---
    const labAvg = (l1+l2+l3)/3;
    const classStanding = att*0.4 + labAvg*0.6;

    const requiredForPassing = (75 - classStanding*0.7)/0.3;
    const requiredForExcellent = (100 - classStanding*0.7)/0.3;
    const maxAchievable = classStanding*0.7 + 100*0.3;

    let output = "===== Prelim Grade Dashboard =====\n\n";
    output += `Lab Work Average: ${labAvg.toFixed(2)}\nClass Standing: ${classStanding.toFixed(2)}\n\n`;

    function addGradeResult(label, required){
        output += `=== ${label} ===\n`;
        if(required>100){
            output+=`Required Prelim Exam: ${required.toFixed(2)}\nMaximum achievable Prelim Grade: ${maxAchievable.toFixed(2)}\nRemark: Even scoring 100 on the Prelim Exam cannot reach ${label}.\n\n`;
        } else if(required===100){
            output+=`Required Prelim Exam: ${required.toFixed(2)}\nRemark: You need a full score on the Prelim Exam to reach ${label}.\n\n`;
        } else if(required<=0){
            output+=`No Prelim Exam score needed.\nRemark: Current class standing is enough to reach ${label}.\n\n`;
        } else if(required<40){
            output+=`Required Prelim Exam: ${required.toFixed(2)}\nRemark: Minimal effort on the Prelim Exam is enough to reach ${label}.\n\n`;
        } else if(required<70){
            output+=`Required Prelim Exam: ${required.toFixed(2)}\nRemark: Moderate effort on the Prelim Exam is needed to reach ${label}.\n\n`;
        } else{
            output+=`Required Prelim Exam: ${required.toFixed(2)}\nRemark: High score on the Prelim Exam is required to reach ${label}.\n\n`;
        }
    }

    addGradeResult("PASSING (75)", requiredForPassing);
    addGradeResult("EXCELLENT (100)", requiredForExcellent);

    results.innerText = output;
}
</script>
</body>
</html>